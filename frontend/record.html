<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Record Your Speech - Aesop.AI</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo">
                <div class="logo-dot"></div>
                <span>Aesop.AI</span>
            </div>
            <nav class="nav">
                <a href="home.html" class="nav-link">Home</a>
                <a href="record.html" class="nav-link active">Record</a>
            </nav>
            <div class="header-actions">
                <div class="profile-btn">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M20 21V19C20 17.9391 19.5786 16.9217 18.8284 16.1716C18.0783 15.4214 17.0609 15 16 15H8C6.93913 15 5.92172 15.4214 5.17157 16.1716C4.42143 16.9217 4 17.9391 4 19V21" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </div>
            </div>
        </div>
    </header>

    <main>
        <!-- Record Section -->
        <section id="record" class="record-section">
            <div class="record-content">
                <div class="record-instructions">
                    <h1 class="record-main-title">
                        <span class="gradient-text">Record Your Speech</span>
                    </h1>
                    <h2 class="record-subtitle">Practice and Perfect Your Communication</h2>
                    <p class="record-description">
                        Record a video of yourself speaking to prepare for transcription and analysis
                    </p>
                </div>
                
                <div class="tips-grid">
                    <div class="tip-card">
                        <div class="tip-icon">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 1C13.1 1 14 1.9 14 3V11C14 12.1 13.1 13 12 13C10.9 13 10 12.1 10 11V3C10 1.9 10.9 1 12 1Z" fill="#DC2626"/>
                                <path d="M19 10V12C19 15.9 15.9 19 12 19C8.1 19 5 15.9 5 12V10H7V12C7 14.8 9.2 17 12 17C14.8 17 17 14.8 17 12V10H19Z" fill="#DC2626"/>
                                <path d="M11 22H13V24H11V22Z" fill="#DC2626"/>
                            </svg>
                        </div>
                        <h3 class="tip-title">Speak Clearly</h3>
                        <p class="tip-description">Enunciate your words and maintain a steady pace</p>
                    </div>
                    <div class="tip-card">
                        <div class="tip-icon">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M1 12S5 4 12 4S23 12 23 12S19 20 12 20S1 12 1 12Z" stroke="#DC2626" stroke-width="2" fill="none"/>
                                <circle cx="12" cy="12" r="3" fill="#DC2626"/>
                            </svg>
                        </div>
                        <h3 class="tip-title">Eye Contact</h3>
                        <p class="tip-description">Look at the camera as if speaking to a live audience</p>
                    </div>
                    <div class="tip-card">
                        <div class="tip-icon">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 2L13.09 8.26L20 9L13.09 9.74L12 16L10.91 9.74L4 9L10.91 8.26L12 2Z" fill="#DC2626"/>
                                <path d="M12 1V3M12 21V23M4.22 4.22L5.64 5.64M18.36 18.36L19.78 19.78M1 12H3M21 12H23M4.22 19.78L5.64 18.36M18.36 5.64L19.78 4.22" stroke="#DC2626" stroke-width="1.5"/>
                            </svg>
                        </div>
                        <h3 class="tip-title">Confidence</h3>
                        <p class="tip-description">Maintain confident posture and body language</p>
                    </div>
                </div>

                <!-- Video Recording Interface -->
                <div class="recording-container">
                    <!-- Recording Status Indicators (Outside Video) -->
                    <div class="recording-status-bar">
                        <div class="recording-indicator hidden" id="recordingIndicator">
                            <div class="recording-dot"></div>
                            <span>Recording</span>
                        </div>
                        <div class="recording-timer hidden" id="recordingTimer">00:00</div>
                    </div>
                    
                    <div class="video-container">
                        <div class="video-preview" id="videoPreview">
                            <video id="webcamVideo" autoplay muted playsinline></video>
                        </div>
                        <div class="video-playback hidden" id="videoPlayback">
                            <video id="recordedVideo" controls></video>
                        </div>
                        <div class="status-text" id="statusText">Camera Preview</div>
                    </div>

                    <div class="controls-container">
                        <button class="record-button" id="recordButton" onclick="toggleRecording()">
                            <svg class="record-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M8 5v14l11-7z" fill="currentColor"/>
                            </svg>
                            <span class="record-text">Start Recording</span>
                        </button>

                        <div class="action-buttons">
                            <button class="upload-button" onclick="document.getElementById('fileInput').click()">
                                <svg class="action-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="currentColor" stroke-width="2" fill="none"/>
                                    <polyline points="14,2 14,8 20,8" stroke="currentColor" stroke-width="2" fill="none"/>
                                    <line x1="16" y1="13" x2="8" y2="13" stroke="currentColor" stroke-width="2"/>
                                    <line x1="16" y1="17" x2="8" y2="17" stroke="currentColor" stroke-width="2"/>
                                    <polyline points="10,9 9,9 8,9" stroke="currentColor" stroke-width="2" fill="none"/>
                                </svg>
                                Upload Video
                            </button>

                            <button class="download-button hidden" id="downloadButton" onclick="downloadVideo()">
                                <svg class="action-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" stroke="currentColor" stroke-width="2" fill="none"/>
                                    <polyline points="7,10 12,15 17,10" stroke="currentColor" stroke-width="2" fill="none"/>
                                    <line x1="12" y1="15" x2="12" y2="3" stroke="currentColor" stroke-width="2"/>
                                </svg>
                                Download Video
                            </button>
                        </div>

                        <input type="file" id="fileInput" accept="video/*" style="display: none;" onchange="handleFileUpload(event)">

                        <div class="file-info hidden" id="fileInfo">
                            <h4> File Information</h4>
                            <p><strong>Video:</strong> Ready for transcription</p>
                            <p><strong>Format:</strong> WebM (VP9 codec)</p>
                            <p><strong>Audio:</strong> <span id="audioStatus">Included</span></p>
                            <p><strong>Status:</strong> Ready for analysis</p>
                        </div>

                        <div class="preview-actions hidden" id="previewActions">
                            <button class="btn-secondary" onclick="resetRecording()">Record Another Speech</button>
                            <button class="btn-primary" onclick="uploadRecording()">Upload and Get Feedback</button>
                        </div>
                    </div>
                </div>

                <div class="upload-progress hidden" id="uploadProgress">
                    <div class="progress-spinner"></div>
                    <div class="progress-content">
                        <h3>Analyzing Your Speech</h3>
                        <p>Our AI is processing your recording and generating personalized feedback...</p>
                    </div>
                </div>

                <!-- AI Feedback Report -->
                <div id="report-content" class="report-content hidden">
                    <div class="feedback-container">
                        <!-- Box 1: Text Transcription with Highlights -->
                        <div class="feedback-box transcription-box">
                            <div class="feedback-box-header">
                                <h3 class="feedback-box-title">üìù Transcription Analysis</h3>
                                <p class="feedback-box-subtitle">Click highlighted words to see AI suggestions</p>
                            </div>
                            <div class="transcription-content">
                                <div class="transcription-text" id="transcriptionText">
                                    <p>Hello everyone, <span class="highlight-word" data-suggestion="Hello, everyone" data-reason="Adding a comma after 'Hello' improves readability and follows proper greeting punctuation.">Hello everyone</span>, thank you for <span class="highlight-word" data-suggestion="joining" data-reason="'Joining' is more specific and professional than 'coming' in this context.">coming</span> to today's presentation. I'm <span class="highlight-word" data-suggestion="excited" data-reason="'Excited' conveys more enthusiasm and engagement than 'happy'.">happy</span> to share with you our <span class="highlight-word" data-suggestion="latest" data-reason="'Latest' is more precise and current than 'new'.">new</span> findings and <span class="highlight-word" data-suggestion="insights" data-reason="'Insights' is more professional and specific than 'ideas'.">ideas</span> about the future of technology.</p>
                                </div>
                                <div class="suggestion-popup hidden" id="suggestionPopup">
                                    <div class="popup-content">
                                        <div class="popup-header">
                                            <span class="popup-title">AI Suggestion</span>
                                            <button class="popup-close" onclick="closeSuggestionPopup()">√ó</button>
                                        </div>
                                        <div class="popup-body">
                                            <div class="original-word">
                                                <span class="word-label">Original:</span>
                                                <span class="word-text" id="originalWord"></span>
                                            </div>
                                            <div class="suggested-word">
                                                <span class="word-label">Suggested:</span>
                                                <span class="word-text" id="suggestedWord"></span>
                                            </div>
                                            <div class="reason">
                                                <span class="reason-label">Why:</span>
                                                <span class="reason-text" id="reasonText"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Simple Footer for Record Page -->
    <footer class="record-page-footer">
        <div class="record-footer-content">
            <!-- Gray Band -->
            <div class="gray-band"></div>
            
            <div class="copyright-footer">
                <div class="copyright-content">
                    <p>&copy; 2025 Aesop.AI All rights reserved.</p>
                </div>
            </div>
        </div>
    </footer>

    <script src="record-script.js"></script>
</body>
</html>